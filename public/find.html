<!DOCTYPE html>
<html>
<head>
	<title>Find A Cleanup Event</title>
	<title>Home Page</title>
	<link rel="stylesheet" type="text/css" href="green.css">
<!-- 	google fonts -->
<link href="https://fonts.googleapis.com/css?family=Arya|Averia+Gruesa+Libre|Crete+Round|Delius+Unicase|Goblin+One|Montserrat|Seymour+One" rel="stylesheet">
	<!-- 	//materialize -->
	<!-- Compiled and minified CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/css/materialize.min.css">

  <!-- Compiled and minified JavaScript -->
  <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.8/js/materialize.min.js"></script>
</head>
<body>
<!-- //nav bar -->
  <nav>
    <div class="nav-wrapper green accent-4">
      <a href="home" class="brand-logo">Litterbot</a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a href="home">Home</a></li>
        <li><a href="upload">Upload A Photo</a></li>
        <li><a href="create">Create An Event</a></li>
        <li><a href="gallery">Gallery</a></li>
      </ul>
    </div>
  </nav>

  <div class="container">
    <h4>Check Out These Upcoming Cleanup Events!</h4>
  </div>

  <div id="map" style="width:100%;height:500px"></div>
  <div class="row">
    <div class="col s12 m12">  
      <div id="eventsShown"></div>
    </div>

  </div>
    

  <script type="text/javascript" src="green.js"></script>
 

 
<script type="text/javascript">
// var express = require('express');
var currentURL = window.location.origin;
var eventsDisplayed = [];
  $.ajax({ 
    url: currentURL +"/api/eventsCreated",
  }).done(function( data ) {
    console.log(data);

    for(i=0; i<data.length; i++){

      var eachEvent = data[i].eventName + 
                      data[i].addressOne;
      console.log("================")
      console.log("Events Displayed: ", eventsDisplayed);
      console.log("Each Event: ", eachEvent);
      eventsDisplayed.push(eachEvent);

      console.log("================")
      console.log(data[i].eventName);
      console.log(data[i].addressOne);
      console.log(data[i].addressTwo);
      console.log(data[i].city);
      console.log(data[i].state);
      console.log(data[i].zipCode);
      console.log(data[i].cleanupDate);
      console.log(data[i].cleanupTime);
      console.log(data[i].eventDescription);
      console.log(data[i].userName);

      $("#eventsShown").append(eventsDisplayed);

    }

  });


 var latLng = [];
  // Try HTML5 geolocation.
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(function(position) {
       
       var lat = position.coords.latitude;
       var lng = position.coords.longitude;
       var userLat = parseFloat(lat);
       var userLng = parseFloat(lng);
      
  var myCenter = new google.maps.LatLng(userLat,userLng);
  var mapCanvas = document.getElementById("map");
  var mapOptions = {center: myCenter, zoom: 5};
  var map = new google.maps.Map(mapCanvas, mapOptions);
  var marker = new google.maps.Marker({position:myCenter});
  marker.setMap(map);

  app.get('/api/cleanups', function(req, res){
    res.json(cleanups);
    console.log(res)

  });


});
 }
  
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAF1z4D8_qAlnNA6PDoT8UrYOjhajWyP1Y"></script>

</body>
</html>